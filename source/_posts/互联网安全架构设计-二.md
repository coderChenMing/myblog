---
title: 互联网安全架构设计(二)
date: 2020-01-15 19:36:16
updated: 2020-01-15 20:45:12
tags: web安全
categories: 架构设计
---
## 什么是防盗链
    第三方网站访问下载非本地域名图片等资源时进行阻止下载
## 如何实现防盗链
    判断Http请求头referer域中的记录来源的值,如果和当前访问的域名不一致,说明该图片可能被其他服务器盗用
    实现: 限制资源(图片,视频，文件等)只能在某个域名(限制某个服务器)来源上进行访问 
    使用过滤器拦截请求,判断请求头中的域名(referer记录)与需要限制的域名访问是否一致,如果不一致,说明可能被盗用,进行拦截
    eg: 自己访问自己域名一致,可以访问资源
        第三方网站访问域名referer是第三方网站域名,与本地域名不一致,提示不能访问
    测试: localhost:9090 页面直接访问localhost:8080/imgs/test.png,提示不能访问该图片
    直接访问localhost:8080/imgs/test.png,提示不能访问该图片
    进入localhost:8080自己页面后,访问该图片,访问成功
    eg: 视频云里黑白名单控制,即使你知道视频地址也无法播放
## 什么是CSRF
    Cross Site Request Forgery ,跨站域请求伪造,也就是大家熟知的钓鱼网站。
    xss利用站点内信任用户,CSRF通过伪装来自受信任用户的请求来利用受信任网站。
    CSRF相对更危险
## 什么是幂等
    保证数据唯一性,不许有重复,可以防止表单重复提交
## 保证幂等解决方案